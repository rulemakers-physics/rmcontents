(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3548,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566),a=e.i(97815),l=e.i(76009);e.i(36180);var d=e.i(98925);function i(){let{user:e,checkFirstLogin:i}=(0,a.useAuth)(),o=(0,r.useRouter)(),[c,n]=(0,s.useState)(""),[u,m]=(0,s.useState)(""),[b,x]=(0,s.useState)(""),[h,f]=(0,s.useState)(""),[g,y]=(0,s.useState)(!1),j=async t=>{if(t.preventDefault(),!e)return void f("로그인 정보가 없습니다. 다시 로그인해주세요.");if(!c||!u)return void f("이름과 학원명은 필수입니다.");y(!0);try{let t=(0,d.doc)(l.db,"users",e.uid);await (0,d.setDoc)(t,{uid:e.uid,email:e.email,name:c,academy:u,school:b||"",createdAt:new Date,role:e.isAdmin?"admin":"instructor"},{merge:!0}),await i(e),o.push("/dashboard")}catch(e){console.error("프로필 저장 중 에러:",e),f("프로필 저장에 실패했습니다. 잠시 후 다시 시도해주세요."),y(!1)}};return e?(0,t.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:(0,t.jsxs)("div",{className:"w-full max-w-lg rounded-lg bg-white p-8 shadow-md",children:[(0,t.jsx)("h2",{className:"mb-6 text-center text-2xl font-bold text-gray-900",children:"프로필 설정"}),(0,t.jsx)("p",{className:"mb-6 text-center text-sm text-gray-600",children:"서비스 이용을 위해 추가 정보를 입력해주세요."}),(0,t.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"이름 (필수)"}),(0,t.jsx)("input",{id:"name",type:"text",value:c,onChange:e=>n(e.target.value),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"academy",className:"block text-sm font-medium text-gray-700",children:"학원명 (필수)"}),(0,t.jsx)("input",{id:"academy",type:"text",value:u,onChange:e=>m(e.target.value),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"school",className:"block text-sm font-medium text-gray-700",children:"담당 학교 (선택)"}),(0,t.jsx)("input",{id:"school",type:"text",value:b,onChange:e=>x(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),h&&(0,t.jsx)("p",{className:"text-center text-sm text-red-600",children:h}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"submit",disabled:g,className:"w-full rounded-md border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:g?"저장 중...":"설정 완료 및 시작하기"})})]})]})}):(0,t.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:"로그인 정보를 불러오는 중..."})}e.s(["default",()=>i])}]);