(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,14677,e=>{"use strict";let t,r="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),s=new Uint8Array(16),l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).slice(1));e.s(["v4",0,function(e,a,i){if(r&&!a&&!e)return r();var o=e,n=i;let d=(o=o||{}).random??o.rng?.()??function(){if(!t){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");t=crypto.getRandomValues.bind(crypto)}return t(s)}();if(d.length<16)throw Error("Random bytes length must be >= 16");if(d[6]=15&d[6]|64,d[8]=63&d[8]|128,a){if((n=n||0)<0||n+16>a.length)throw RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let e=0;e<16;++e)a[n+e]=d[e];return a}return function(e,t=0){return(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase()}(d)}],14677)},40997,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(18566),l=e.i(97815),a=e.i(76009);e.i(36180);var i=e.i(98925);e.i(61086);var o=e.i(27215),n=e.i(14677);function d(){let{user:e,loading:d}=(0,l.useAuth)(),u=(0,s.useRouter)(),[c,m]=(0,r.useState)(""),[f,b]=(0,r.useState)(""),[h,x]=(0,r.useState)(null),[g,p]=(0,r.useState)(!1),[y,v]=(0,r.useState)("");(0,r.useEffect)(()=>{!d&&(e||(alert("로그인이 필요한 서비스입니다."),u.push("/login")))},[e,d,u]);let w=async t=>{if(t.preventDefault(),!e)return void v("로그인이 필요합니다.");if(!c||!f)return void v("요청 제목과 상세 내용은 필수입니다.");p(!0),v("");try{let t="",r="";if(h){let s=`${(0,n.v4)()}-${h.name}`;r=`uploads/requests/${e.uid}/${s}`;let l=(0,o.ref)(a.storage,r);await (0,o.uploadBytes)(l,h),t=await (0,o.getDownloadURL)(l)}let s=(await (0,i.getDoc)((0,i.doc)(a.db,"users",e.uid))).data();await (0,i.addDoc)((0,i.collection)(a.db,"requests"),{instructorId:e.uid,instructorName:s?.name||"이름없음",academy:s?.academy||"학원없음",title:c,details:f,status:"requested",requestedAt:(0,i.serverTimestamp)(),referenceFileUrl:t,referenceStoragePath:r}),alert("작업 요청이 성공적으로 제출되었습니다."),u.push("/dashboard")}catch(e){console.error("요청 제출 중 에러:",e),v("제출 중 오류가 발생했습니다. 잠시 후 다시 시도해주세요."),p(!1)}};return d?(0,t.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:"로딩 중..."}):e?(0,t.jsx)("div",{className:"flex min-h-screen flex-col",children:(0,t.jsx)("main",{className:"flex-grow bg-gray-50 py-16",children:(0,t.jsxs)("div",{className:"container mx-auto max-w-2xl rounded-lg bg-white p-8 shadow-md",children:[(0,t.jsx)("h1",{className:"mb-8 text-center text-3xl font-bold text-gray-900",children:"새 작업 요청하기"}),(0,t.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"요청 제목 (필수)"}),(0,t.jsx)("input",{id:"title",type:"text",value:c,onChange:e=>m(e.target.value),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"예: OO고 2학년 1학기 중간고사 대비"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"details",className:"block text-sm font-medium text-gray-700",children:"상세 요청 내용 (필수)"}),(0,t.jsx)("textarea",{id:"details",rows:6,value:f,onChange:e=>b(e.target.value),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"필요한 문항 수, 난이도, 특정 유형, 마감일 등 상세 내용을 적어주세요."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"file",className:"block text-sm font-medium text-gray-700",children:"참고 파일 (선택)"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"학교 기출 문제, 참고 자료 등 PDF 파일을 업로드할 수 있습니다."}),(0,t.jsx)("input",{id:"file",type:"file",accept:".pdf",onChange:e=>{e.target.files&&e.target.files[0]&&x(e.target.files[0])},className:"block w-full text-sm text-gray-500   file:mr-4 file:rounded-md file:border-0   file:bg-blue-50 file:px-4 file:py-2   file:text-sm file:font-medium file:text-blue-700   hover:file:bg-blue-100"})]}),y&&(0,t.jsx)("p",{className:"text-center text-sm text-red-600",children:y}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"submit",disabled:g,className:"w-full rounded-md border border-transparent bg-blue-600 px-6 py-3 text-base font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:g?"제출 중...":"작업 요청하기"})})]})]})})}):(u.push("/login"),null)}e.s(["default",()=>d])}]);